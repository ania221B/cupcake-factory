import{r as b,j as e,C as L,B as k,T as A,u as B,a as H,b as W,D as G,p as K,d as $,x as M,y as Q}from"./index-j-o1g_uY.js";import{B as q}from"./Breadcrumb-NBE_voso.js";import{P as O,a as V}from"./ProductPricing-DPlsvrYs.js";import{Q as J}from"./QuantityFormControl-OWxIAnvN.js";function U({images:i}){var c,u,p,a,f,g,h,N,S,z,_,C,D,T,j,d,y,x;const[t,m]=b.useState((i==null?void 0:i[0])||{}),r=b.useRef([]);function n(s){return s<0?i.length-1:s>i.length-1?0:s}function l(s,o){var v,P;if(s.key==="ArrowRight"){s.preventDefault();const w=n(o+1);(v=r.current[w])==null||v.focus()}if(s.key==="ArrowLeft"){s.preventDefault();const w=n(o-1);(P=r.current[w])==null||P.focus()}(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),m(i[o]))}return e.jsxs("div",{className:"thumbnail-gallery",children:[e.jsx("div",{className:"thumbnail-gallery__preview",children:e.jsxs("picture",{children:[((u=(c=t==null?void 0:t.sizes)==null?void 0:c["1200"])==null?void 0:u.avif)&&e.jsx("source",{srcSet:t.sizes[1200].avif,type:"image/avif",media:"(min-width: 1200px)"}),((a=(p=t==null?void 0:t.sizes)==null?void 0:p["1200"])==null?void 0:a.webp)&&e.jsx("source",{srcSet:t.sizes[1200].webp,type:"image/webp",media:"(min-width: 1200px)"}),((g=(f=t==null?void 0:t.sizes)==null?void 0:f["768"])==null?void 0:g.avif)&&e.jsx("source",{srcSet:t.sizes[768].avif,type:"image/avif",media:"(min-width: 768px)"}),((N=(h=t==null?void 0:t.sizes)==null?void 0:h["768"])==null?void 0:N.webp)&&e.jsx("source",{srcSet:t.sizes[768].webp,type:"image/webp",media:"(min-width: 768px)"}),((z=(S=t==null?void 0:t.sizes)==null?void 0:S["400"])==null?void 0:z.avif)&&e.jsx("source",{srcSet:t.sizes[400].avif,type:"image/avif",media:"(max-width: 767px)"}),((C=(_=t==null?void 0:t.sizes)==null?void 0:_["400"])==null?void 0:C.webp)&&e.jsx("source",{srcSet:t.sizes[400].webp,type:"image/webp",media:"(max-width: 767px)"}),e.jsx("img",{src:(t==null?void 0:t.src)||((T=(D=t==null?void 0:t.sizes)==null?void 0:D.fallback)==null?void 0:T.jpg)||((d=(j=t.sizes)==null?void 0:j.fallback)==null?void 0:d.webp)||((x=(y=t.sizes)==null?void 0:y.fallback)==null?void 0:x.avif),alt:t.alt,title:t.title})]})}),e.jsx("ul",{className:"thumbnail-gallery__list",role:"list",children:i.map((s,o)=>{const{id:v,src:P,alt:w,title:E}=s,F=t.id===v;return e.jsx("li",{children:e.jsx("button",{tabIndex:0,ref:R=>r.current[o]=R,type:"button","aria-label":`View image ${o+1}`,onClick:()=>m(s),onKeyDown:R=>l(R,o),className:F?"btn btn--thumbnail selected":"btn btn--thumbnail",children:e.jsx("img",{src:P,alt:`${w} - image ${o+1}`,title:E,loading:"lazy"})})},v)})})]})}function X(){const[i,t]=b.useState(0),{email:m,formError:r,isSubmitting:n,isSuccess:l,setIsSuccess:c,handleChange:u,handleSubmit:p}=L(),a=b.useRef(null);return b.useEffect(()=>{if(a.current){const f=a.current.getBoundingClientRect().height;t(f)}}),l?e.jsxs("div",{className:"form-wrapper form-wrapper--restock-notification ",style:{minHeight:`${i}px`},children:[e.jsxs("header",{children:[e.jsx("h3",{children:"Notify on Restock:"}),e.jsx("p",{children:"If you'd like to be notified once the product is restocked, type your email below."})]}),e.jsxs("div",{className:`form-wrapper--restock-notification__confirmation ${l?"form-fade-in":"form-fade-out"}`,children:[e.jsxs("div",{children:[e.jsx("h4",{className:"fs-450 fw-700 clr-neutral-300",children:"Thanks for your email!"}),e.jsx("p",{children:"We'll notify you as soon as the product is available again."})]}),e.jsx(k,{buttonText:"Got it",isLines:!0,onClick:()=>setTimeout(()=>{c(!1)},500)})]})]}):e.jsx("div",{ref:a,className:"form-wrapper form-wrapper--restock-notification",children:e.jsxs("form",{onSubmit:p,className:`form form--restock-notification ${l?"form-fade-out":"form-fade-in"}`,children:[e.jsxs("header",{children:[e.jsx("h3",{children:"Notify on Restock:"}),e.jsx("p",{children:"If you'd like to be notified once the product is restocked, type your email below."})]}),e.jsxs("div",{className:"form__control-wrapper",children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email:"}),e.jsx("input",{id:"email",name:"email",value:m,type:"email",placeholder:"Email address",onChange:u}),r&&e.jsxs("div",{className:"form__error clr-primary-900 fw-700",children:[e.jsx(A,{}),e.jsx("p",{className:"fs-200",children:r})]})]}),n?e.jsx(k,{buttonText:"Subscribing...",ariaLabel:"Notify me about product restock",type:"submit",isLines:!0,isInactive:!0}):e.jsx(k,{buttonText:"Notify me",ariaLabel:"Notify me about product restock",type:"submit",isLines:!0})]})})}function te(){const{headerHeight:i,allProducts:t,addToCart:m,productMin:r,productMax:n}=B(),{productSlug:l}=H(),c=t.find(s=>s.name===W(l)),u=G(),{images:p,name:a,description:f,fullDescription:g,type:h,pricePerKg:N,regularPrice:S,lowestPrice30Days:z,currentPrice:_,rating:C,bestseller:D,newArrival:T,sale:j,availability:d}=c,[y,x]=b.useState(1);return e.jsx(e.Fragment,{children:e.jsx("section",{className:"section",style:{"--header-height":`${i}px`},children:e.jsxs("div",{className:"container",children:[e.jsx(q,{items:[{label:"home",path:"/"},{label:"store",path:"/store"},{label:"all products",path:"/store/all-products"},{label:`${K(h)}`,path:`/store/all-products/${h}`},{label:`${a}`,path:null}]}),e.jsxs("article",{className:"product-item--single columns-one-one",children:[e.jsx(U,{images:p}),e.jsxs("div",{className:"product-item--single__body",children:[e.jsx(O,{variant:"single",name:a,description:f,rating:C,bestseller:D,newArrival:T,sale:j,type:h}),e.jsx(V,{variant:"single",currentPrice:_,pricePerKg:N,regularPrice:S,lowestPrice30Days:z,sale:j}),e.jsxs("div",{className:"product-item--single__cart-controls cart-controls",children:[e.jsx(J,{quantity:y,onIncrease:()=>x(s=>$(s+1,r,n)),onDecrease:()=>x(s=>$(s-1,r,n)),onChange:s=>x($(s,r,n)),isDisabled:!d}),d?e.jsx(k,{buttonText:"Add to cart",onClick:()=>m(c,y),isItemCard:!0}):e.jsx(k,{buttonText:"Will be back soon",isItemCard:!0,isInactive:!0})]}),e.jsxs("section",{className:"product-item--single__full-description",children:[e.jsx("h3",{children:"More info:"}),e.jsx("p",{children:g})]}),e.jsxs("dl",{className:"product-item--single__availability",children:[e.jsx("dt",{children:"Availability:"}),d?e.jsx("dd",{children:"In stock"}):e.jsxs("dd",{children:["Will be back soon. Estimated restock date:"," ",e.jsx("time",{dateTime:Q(u),children:M(u,!0)})]})]}),!d&&e.jsx(X,{})]})]})]})})})}export{te as default};
