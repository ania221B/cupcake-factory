import{r as h,j as e,B as n,T as m,d as p,f as C,g as I}from"./index-1sxtbIzw.js";import{H as z}from"./HeroSection-DqWY7gTi.js";import{u as D}from"./useFormHandler-CSsp13KW.js";function S(){const[b,v]=h.useState(0),_={date:"",time:"",guests:0,email:""},{form:a,setForm:g,formErrors:t,setFormErrors:N,isSubmitting:y,isSuccess:l,setIsSuccess:w,handleChange:o,handleSubmit:F}=D(_,A,k),u=h.useRef(null),c=0,i=12;function j(s,r){const d=new Date,[f,R,T]=s.split("-").map(x=>parseInt(x)),[q,B]=r.split(":").map(x=>parseInt(x));return new Date(f,R-1,T,q,B)>d}function k(s){const r={};return s.date?j(s.date,s.time)||(r.date="Needs to be future"):r.date="Required",s.time?j(s.date,s.time)||(r.time="Needs to be future"):r.time="Required",s.guests?s.guests>i&&(r.guests="12 is max"):r.guests="Required",s.email?/^[a-zA-z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(s.email)||(r.email="Invalid email"):r.email="Required",r}function A(s,r){if(s==="date"||s==="time")return r.trim()===""?"Required":"";if(s==="guests"){if(!r)return"Required";if(r>i)return`You can invite ${i} guests max`;if(r<1)return"You need at least one guest"}return s==="email"?r.trim?/^[a-zA-z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(r)?"":"Invalid email":"Required":""}return h.useEffect(()=>{if(u.current){const s=u.current.getBoundingClientRect().height;v(s)}}),l?e.jsx("div",{className:"form-wrapper form-wrapper--confirmation bg-primary-100 br-medium",style:{height:`${b}px`},children:e.jsxs("div",{className:`flow ${l?"form-fade-in":"form-fade-out"}`,children:[e.jsx("h2",{className:"section__title",children:"Thanks so much!"}),e.jsx("p",{children:"We've received your request and will email you soon to confirm your reservation. Looking forward to having you!"}),e.jsx(n,{buttonText:"Got it",isLines:!0,onClick:()=>setTimeout(()=>{w(!1)},500)})]})}):e.jsx("div",{ref:u,className:"form-wrapper bg-primary-100",children:e.jsxs("form",{className:`form form--reservation ${l?"form-fade-out":"form-fade-in"}`,onSubmit:F,children:[e.jsx("h2",{className:"section__title form__title",children:"Make a reservation"}),e.jsxs("div",{className:"form__control-wrapper",children:[e.jsx("label",{htmlFor:"reservation-date",children:"Date:"}),e.jsx("input",{id:"reservation-date",name:"date",value:a.date,type:"date",onChange:o}),e.jsx("div",{className:"form__error clr-primary-900 fw-700",children:t.date&&e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("p",{className:"fs-200",children:t.date})]})})]}),e.jsxs("div",{className:"form__control-wrapper",children:[e.jsx("label",{htmlFor:"reservation-time",children:"Time:"}),e.jsx("input",{id:"reservation-time",name:"time",value:a.time,type:"time",onChange:o}),e.jsx("div",{className:"form__error clr-primary-900 fw-700",children:t.date&&e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("p",{className:"fs-200",children:t.date})]})})]}),e.jsxs("div",{className:"form__control-wrapper quantity-control",children:[e.jsx("label",{htmlFor:"guest-number",children:"Guests:"}),e.jsx(n,{buttonText:e.jsx(C,{}),ariaLabel:"Decrease number of guests",onClick:()=>g(s=>({...s,guests:p(s.guests-1,c,i)})),isAccent:!0}),e.jsx("input",{type:"number",name:"guests",id:"guest-number",min:c,max:i,step:"1",value:a.guests,onChange:o,onInput:s=>{const{name:r,value:d}=s.target;d>i&&N(f=>({...f,[r]:"12 is max"}))}}),e.jsx(n,{buttonText:e.jsx(I,{}),ariaLabel:"Increase number of guests",onClick:()=>g(s=>({...s,guests:p(s.guests+1,c,i)})),isAccent:!0}),e.jsx("div",{className:"form__error clr-primary-900 fw-700",children:t.guests&&e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("p",{className:"fs-200",children:t.guests})]})})]}),e.jsxs("div",{className:"form__control-wrapper",children:[e.jsx("label",{htmlFor:"reservation-email",children:"Email:"}),e.jsx("input",{id:"reservation-email",name:"email",value:a.email,type:"email",onChange:o}),e.jsx("div",{className:"form__error clr-primary-900 fw-700",children:t.email&&e.jsxs(e.Fragment,{children:[e.jsx(m,{}),e.jsx("p",{className:"fs-200",children:t.email})]})})]}),y?e.jsx(n,{buttonText:"Placing reservation...",type:"submit",hasArrow:!0,isLines:!0,isInactive:!0}):e.jsx(n,{buttonText:"Place reservation",type:"submit",hasArrow:!0,isLines:!0})]})})}function G(){return e.jsxs(e.Fragment,{children:[e.jsx(z,{title:"Book a table"}),e.jsx("section",{className:"section",children:e.jsx("div",{className:"container","data-container":"x-small",children:e.jsx(S,{})})})]})}export{G as default};
